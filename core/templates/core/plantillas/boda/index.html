{% load static %}

<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ cliente.titulo }}{% endblock %}</title>

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Shadows+Into+Light&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="{% static 'core/plantillas/boda/styles.css' %}">
</head>

<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loading-screen">
        <div class="loading-content">
            <div class="loading-rings">
                <div class="ring"></div>
                <div class="ring"></div>
                <div class="ring"></div>
            </div>
            <p class="loading-text">Preparando nuestra historia de amor...</p>
        </div>
    </div>

    <!-- Background Elements -->
    <div class="background-elements">
        <div class="floating-heart heart-1">♥</div>
        <div class="floating-heart heart-2">♥</div>
        <div class="floating-heart heart-3">♥</div>
        <div class="floating-petals">
            <div class="petal petal-1"></div>
            <div class="petal petal-2"></div>
            <div class="petal petal-3"></div>
            <div class="petal petal-4"></div>
            <div class="petal petal-5"></div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero is-fullheight hero-section" {% if cliente.imagen_fondo %}
        style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.4)), url('{{ cliente.imagen_fondo.url }}');" {% endif %}>

        <div class="hero-body">
            <div class="container has-text-centered">
                <div class="hero-content">
                    <!-- Decorative elements -->
                    <div class="hero-ornament hero-ornament-top"></div>
                    
                    <div class="hero-badge animate-fade-in">
                        <i class="fas fa-heart"></i>
                        <span>Celebremos Juntos</span>
                    </div>
                    
                    <div class="couple-names">
                        <h1 class="bride-name animate-slide-up">{{ cliente.nombre_novia|default:"María" }}</h1>
                        <div class="ampersand">&</div>
                        <h1 class="groom-name animate-slide-up">{{ cliente.nombre_novio|default:"Juan" }}</h1>
                    </div>
                    
                    <div class="hero-divider animate-expand"></div>
                    
                    <div class="wedding-date">
                        <p class="date-text">{{ cliente.fecha_evento|date:"j \d\e F, Y" }}</p>
                        <div class="date-separator"></div>
                        <p class="location-text">{{ cliente.ciudad_evento|default:"Ciudad de México" }}</p>
                    </div>
                    
                    <div class="hero-ornament hero-ornament-bottom"></div>
                </div>
            </div>
        </div>

        <div class="scroll-down enhanced-scroll" id="scroll-down-btn">
            <div class="scroll-text">Desliza para continuar</div>
            <div class="scroll-arrow">
                <i class="fas fa-angle-down"></i>
            </div>
        </div>
    </section>

    <!-- Quote Section -->
    <section class="section quote-section">
        <div class="container has-text-centered">
            <div class="quote-container">
                <div class="quote-mark">"</div>
                <p class="quote-text">
                    {{ cliente.frase_amor|default:"El amor no se mira, se siente, y aún más cuando ella está junto a ti." }}
                </p>
                <div class="quote-author">{{ cliente.autor_frase|default:"- Pablo Neruda" }}</div>
            </div>
        </div>
    </section>

    <!-- Countdown Section -->
    <section class="section countdown-section" id="cuenta-regresiva">
        <div class="container has-text-centered">
            <div class="section-header">
                <div class="section-ornament"></div>
                <h2 class="section-title">{{ cliente.titulo_countdown|default:"Faltan" }}</h2>
                <p class="countdown-message">¡Te esperamos para festejar este gran momento!</p>
            </div>
            
            <div class="countdown-container enhanced-countdown" id="countdown" data-event-date="{{ event_datetime_iso_string }}">
                <div class="time-block">
                    <div class="time-card">
                        <div class="number" id="days">--</div>
                        <div class="label">Días</div>
                    </div>
                </div>
                <div class="separator">:</div>

                <div class="time-block">
                    <div class="time-card">
                        <div class="number" id="hours">--</div>
                        <div class="label">Horas</div>
                    </div>
                </div>
                <div class="separator">:</div>

                <div class="time-block">
                    <div class="time-card">
                        <div class="number" id="minutes">--</div>
                        <div class="label">Minutos</div>
                    </div>
                </div>
                <div class="separator">:</div>

                <div class="time-block">
                    <div class="time-card">
                        <div class="number" id="seconds">--</div>
                        <div class="label">Segundos</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Wedding Events Section -->
    <section class="section wedding-events-section">
        <div class="container">
            <div class="section-header has-text-centered">
                <div class="section-ornament"></div>
                <h2 class="section-title">Nuestro Día Especial</h2>
                <p class="section-subtitle">Te invitamos a acompañarnos en estos momentos únicos</p>
            </div>
            
            <div class="wedding-cards">
                <!-- Ceremonia Religiosa -->
                {% if cliente.ceremonia_enabled|default:True %}
                <div class="wedding-card ceremony-card">
                    <div class="card-header">
                        <div class="card-icon">
                            <i class="fas fa-church"></i>
                        </div>
                        <h3 class="card-title">{{ cliente.titulo_ceremonia|default:"Ceremonia Religiosa" }}</h3>
                        <div class="card-subtitle">{{ cliente.subtitulo_ceremonia|default:"Unión Sagrada" }}</div>
                    </div>
                    
                    <div class="card-content">
                        <div class="event-details-enhanced">
                            <div class="detail-row">
                                <div class="detail-icon">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                                <div class="detail-content">
                                    <span class="detail-label">Fecha</span>
                                    <span class="detail-value">{{ cliente.fecha_ceremonia|date:"l, j \d\e F Y"|default:cliente.fecha_evento|date:"l, j \d\e F Y" }}</span>
                                </div>
                            </div>
                            
                            <div class="detail-row">
                                <div class="detail-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="detail-content">
                                    <span class="detail-label">Hora</span>
                                    <span class="detail-value">{{ cliente.hora_ceremonia|time:"H:i"|default:"16:00" }}</span>
                                </div>
                            </div>
                            
                            <div class="detail-row">
                                <div class="detail-icon">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <div class="detail-content">
                                    <span class="detail-label">Lugar</span>
                                    <span class="detail-value">{{ cliente.lugar_ceremonia|default:"Parroquia San José" }}<br>{{ cliente.direccion_ceremonia|default:"Av. Reforma 123, Roma Norte" }}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card-message">
                            <p>{{ cliente.mensaje_ceremonia|default:"Nos encantaría que nos acompañes en este momento tan especial donde uniremos nuestras vidas ante Dios." }}</p>
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Celebración -->
                <div class="wedding-card party-card">
                    <div class="card-header">
                        <div class="card-icon">
                            <i class="fas fa-glass-cheers"></i>
                        </div>
                        <h3 class="card-title">{{ cliente.titulo_fiesta|default:"Celebración" }}</h3>
                        <div class="card-subtitle">{{ cliente.subtitulo_fiesta|default:"Fiesta de Bodas" }}</div>
                    </div>
                    
                    <div class="card-content">
                        <div class="event-details-enhanced">
                            <div class="detail-row">
                                <div class="detail-icon">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                                <div class="detail-content">
                                    <span class="detail-label">Fecha</span>
                                    <span class="detail-value">{{ cliente.fecha_evento|date:"l, j \d\e F Y" }}</span>
                                </div>
                            </div>
                            
                            <div class="detail-row">
                                <div class="detail-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="detail-content">
                                    <span class="detail-label">Hora</span>
                                    <span class="detail-value">{{ cliente.hora_evento|time:"H:i" }}</span>
                                </div>
                            </div>
                            
                            <div class="detail-row">
                                <div class="detail-icon">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <div class="detail-content">
                                    <span class="detail-label">Lugar</span>
                                    <span class="detail-value">{{ cliente.lugar_evento }}<br>{{ cliente.direccion_evento }}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card-message">
                            <p>{{ cliente.mensaje_fiesta|default:"Después de la ceremonia, te esperamos para brindar, bailar y celebrar juntos esta nueva etapa de nuestras vidas." }}</p>
                        </div>
                        
                        <div class="card-cta">
                            <a href="https://www.google.com/maps/search/?api=1&query={{ cliente.direccion_evento|urlencode }}"
                               target="_blank" class="button is-primary enhanced-button">
                                <span class="icon">
                                    <i class="fas fa-route"></i>
                                </span>
                                <span>¿Cómo llegar?</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Gallery Section -->
    <section class="section gallery-section">
        <div class="container">
            <div class="section-header has-text-centered">
                <div class="section-ornament"></div>
                <h2 class="section-title">{{ cliente.titulo_galeria|default:"Nuestra Historia" }}</h2>
                <p class="section-subtitle">Momentos que nos trajeron hasta aquí</p>
            </div>

            <div class="enhanced-gallery">
                {% for imagen in cliente.imagenes %}
                {% if imagen %}
                <div class="gallery-item" data-index="{{ forloop.counter0 }}">
                    <div class="gallery-card">
                        <figure class="image gallery-figure">
                            <img src="{{ imagen.url }}" alt="Foto {{ forloop.counter }}" class="gallery-image">
                        </figure>
                        <div class="gallery-overlay">
                            <div class="gallery-overlay-content">
                                <i class="fas fa-search-plus"></i>
                                <span>Ver imagen</span>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- RSVP Section -->
    <section class="section rsvp-section">
        <div class="container">
            <div class="section-header has-text-centered">
                <div class="section-ornament"></div>
                <h2 class="section-title">{{ cliente.titulo_rsvp|default:"Confirma tu Asistencia" }}</h2>
                <p class="section-subtitle">Tu presencia hará este día aún más especial</p>
            </div>
            
            <div class="columns is-centered">
                <div class="column is-8">
                    <div class="rsvp-card enhanced-form-card">
                        <form method="post" action="{% url 'rsvp' cliente.slug %}" class="enhanced-form">
                            {% csrf_token %}
                            
                            <div class="form-group">
                                <label class="enhanced-label">
                                    <i class="fas fa-user"></i>
                                    Nombre Completo
                                </label>
                                <div class="enhanced-input-wrapper">
                                    <input class="input enhanced-input" type="text" name="name" placeholder="Tu nombre completo" required>
                                </div>
                            </div>
                            
                            <div class="columns">
                                <div class="column">
                                    <div class="form-group">
                                        <label class="enhanced-label">
                                            <i class="fas fa-envelope"></i>
                                            Email
                                        </label>
                                        <div class="enhanced-input-wrapper">
                                            <input class="input enhanced-input" type="email" name="email" placeholder="tu@email.com">
                                        </div>
                                    </div>
                                </div>
                                <div class="column">
                                    <div class="form-group">
                                        <label class="enhanced-label">
                                            <i class="fas fa-phone"></i>
                                            Teléfono
                                        </label>
                                        <div class="enhanced-input-wrapper">
                                            <input class="input enhanced-input" type="text" name="telefono" placeholder="Tu teléfono">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            {% if cliente.ceremonia_enabled|default:True %}
                            <div class="form-group">
                                <label class="enhanced-label">
                                    <i class="fas fa-church"></i>
                                    ¿Asistirás a la ceremonia religiosa?
                                </label>
                                <div class="radio-group">
                                    <label class="radio-label">
                                        <input type="radio" name="ceremony_attendance" value="yes" required>
                                        <span class="radio-custom"></span>
                                        Sí, asistiré
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="ceremony_attendance" value="no" required>
                                        <span class="radio-custom"></span>
                                        No podré asistir
                                    </label>
                                </div>
                            </div>
                            {% endif %}
                            
                            <div class="form-group">
                                <label class="enhanced-label">
                                    <i class="fas fa-glass-cheers"></i>
                                    ¿Asistirás a la celebración?
                                </label>
                                <div class="radio-group">
                                    <label class="radio-label">
                                        <input type="radio" name="party_attendance" value="yes" required>
                                        <span class="radio-custom"></span>
                                        Sí, asistiré
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="party_attendance" value="no" required>
                                        <span class="radio-custom"></span>
                                        No podré asistir
                                    </label>
                                </div>
                            </div>
                            
                            <div class="columns">
                                <div class="column">
                                    <div class="form-group">
                                        <label class="enhanced-label">
                                            <i class="fas fa-users"></i>
                                            Acompañantes
                                        </label>
                                        <div class="enhanced-select-wrapper">
                                            <select class="select enhanced-select" name="guests">
                                                <option value="0">Solo yo</option>
                                                <option value="1">1 acompañante</option>
                                                <option value="2">2 acompañantes</option>
                                                <option value="3">3 acompañantes</option>
                                                <option value="4">4 acompañantes</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="column">
                                    <div class="form-group">
                                        <label class="enhanced-label">
                                            <i class="fas fa-utensils"></i>
                                            Restricciones Alimentarias
                                        </label>
                                        <div class="enhanced-input-wrapper">
                                            <input class="input enhanced-input" type="text" name="dietary_restrictions" placeholder="Alergias o restricciones">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="enhanced-label">
                                    <i class="fas fa-heart"></i>
                                    Mensaje especial (opcional)
                                </label>
                                <div class="enhanced-input-wrapper">
                                    <textarea class="textarea enhanced-textarea" name="special_message"
                                        placeholder="Comparte tus buenos deseos..."></textarea>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <button class="button is-primary is-fullwidth is-large enhanced-submit-btn" type="submit">
                                    <span class="icon">
                                        <i class="fas fa-heart"></i>
                                    </span>
                                    <span>Confirmar Asistencia</span>
                                    <div class="button-shine"></div>
                                </button>
                            </div>
                        </form>

                        <div class="form-divider">
                            <span>O confirma por</span>
                        </div>
                        
                        <div class="whatsapp-section">
                            <a href="https://wa.me/{{ cliente.telefono_envio_confirmacion }}?text=Hola,%20quiero%20confirmar%20mi%20asistencia%20a%20la%20boda%20de%20{{ cliente.nombre_novia|default:'María' }}%20y%20{{ cliente.nombre_novio|default:'Juan' }}"
                               class="button is-success is-fullwidth enhanced-whatsapp-btn" target="_blank">
                                <span class="icon">
                                    <i class="fab fa-whatsapp"></i>
                                </span>
                                <span>Confirmar por WhatsApp</span>
                                <div class="button-shine"></div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Dress Code Section -->
    {% if cliente.codigo_vestimenta %}
    <section class="section dresscode-section">
        <div class="container">
            <div class="info-card-enhanced">
                <div class="info-icon-wrapper">
                    <div class="info-icon-bg"></div>
                    <img src="{% static 'core/plantillas/clasica/dress_code.png' %}" alt="Dress Code" class="info-icon">
                </div>
                <div class="info-content">
                    <h2 class="info-title">DRESS CODE</h2>
                    <p class="info-description">{{ cliente.codigo_vestimenta }}</p>
                </div>
            </div>
        </div>
    </section>
    {% endif %}

    <!-- Social Networks Section -->
    {% if cliente.instagram_url %}
    <section class="section social-section enhanced-social" {% if cliente.imagen7 %}style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.6)), url('{{ cliente.imagen7.url }}');"{% endif %}>
        <div class="container">
            <div class="social-content-enhanced">
                <div class="social-icon-large">
                    <i class="fab fa-instagram"></i>
                </div>
                <h3 class="social-title">Síguenos en Instagram</h3>
                <p class="social-description">Etiquétanos en tus fotos y videos del evento</p>
                <a href="{{ cliente.instagram_url }}" class="button is-link enhanced-social-btn" target="_blank">
                    <span class="icon">
                        <i class="fab fa-instagram"></i>
                    </span>
                    <span>Ver Instagram</span>
                </a>
            </div>
        </div>
    </section>
    {% endif %}

    <!-- Playlist Section -->
    <section class="section playlist-section">
        <div class="container">
            <div class="section-header has-text-centered">
                <div class="section-ornament"></div>
                <h2 class="section-title">{{ cliente.titulo_playlist|default:"Sugerí tu Canción" }}</h2>
                <p class="section-subtitle">Ayúdanos a crear la playlist perfecta para nuestra boda</p>
            </div>
            
            <div class="columns is-centered">
                <div class="column is-6">
                    <div class="playlist-card enhanced-form-card">
                        <form method="post" action="{% url 'sugerir_cancion' cliente.slug %}" class="enhanced-form">
                            {% csrf_token %}
                            
                            <div class="columns">
                                <div class="column">
                                    <div class="form-group">
                                        <label class="enhanced-label">
                                            <i class="fas fa-microphone"></i>
                                            Intérprete
                                        </label>
                                        <div class="enhanced-input-wrapper">
                                            <input class="input enhanced-input" type="text" name="nombre_interprete" 
                                                placeholder="Nombre del artista o banda" required>
                                        </div>
                                    </div>
                                </div>
                                <div class="column">
                                    <div class="form-group">
                                        <label class="enhanced-label">
                                            <i class="fas fa-music"></i>
                                            Tema
                                        </label>
                                        <div class="enhanced-input-wrapper">
                                            <input class="input enhanced-input" type="text" name="nombre_tema" 
                                                placeholder="Nombre de la canción" required>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <button class="button is-primary is-fullwidth is-large enhanced-submit-btn" type="submit">
                                    <span class="icon">
                                        <i class="fas fa-plus"></i>
                                    </span>
                                    <span>Sugerir Canción</span>
                                    <div class="button-shine"></div>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Gifts Section -->
    {% if cliente.alias_regalos %}
    <section class="section gift-section">
        <div class="container">
            <div class="info-card-enhanced">
                <div class="info-icon-wrapper">
                    <div class="info-icon-bg"></div>
                    <img src="{% static 'core/plantillas/clasica/gift.png' %}" alt="Regalos" class="info-icon">
                </div>
                <div class="info-content">
                    <h2 class="info-title">REGALOS</h2>
                    <p class="info-description">Si deseás regalarme algo, podés colaborar con nuestros sueños y anhelos. ¡Gracias!</p>
                    <button class="button is-link enhanced-gift-btn" id="gift-modal-btn">
                        <span class="icon">
                            <i class="fas fa-gift"></i>
                        </span>
                        <span>Hacer un regalo</span>
                    </button>
                </div>
            </div>
        </div>
    </section>
    {% endif %}

    <!-- Farewell Section -->
    <section class="section farewell-section">
        <div class="container">
            <div class="farewell-content">
                <div class="farewell-ornament"></div>
                <h3 class="farewell-title">{{ cliente.mensaje_despedida|default:"Gracias por acompañarnos" }}</h3>
                <p class="farewell-subtitle">en este día tan especial</p>
                <div class="farewell-signature">{{ cliente.nombre_novia|default:"María" }} & {{ cliente.nombre_novio|default:"Juan" }}</div>
                <div class="farewell-ornament"></div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer enhanced-footer">
        <div class="content has-text-centered">
            <div class="footer-content">
                <div class="footer-ornament"></div>
                <p class="footer-text">© 2025 - {{ cliente.fecha_evento|date:"d • m • Y" }} - Con amor, {{ cliente.nombre_novia|default:"María" }} & {{ cliente.nombre_novio|default:"Juan" }}</p>
            </div>
        </div>
    </footer>

    <!-- Enhanced Gift Modal -->
    {% if cliente.alias_regalos %}
    <div class="modal enhanced-modal" id="gift-modal">
        <div class="modal-background"></div>
        <div class="modal-card enhanced-modal-card">
            <header class="modal-card-head">
                <div class="modal-title-wrapper">
                    <div class="modal-icon">
                        <i class="fas fa-gift"></i>
                    </div>
                    <p class="modal-card-title">Datos para Regalos</p>
                </div>
                <button class="delete enhanced-delete" aria-label="close" id="close-gift-modal"></button>
            </header>
            <section class="modal-card-body enhanced-modal-body">
                <div class="gift-info-enhanced">
                    <div class="bank-icon">
                        <i class="fas fa-university"></i>
                    </div>
                    <h4 class="bank-title">Datos Bancarios</h4>
                    <div class="bank-data-card">
                        <div class="bank-field">
                            <span class="bank-label">Alias:</span>
                            <span class="bank-value">{{ cliente.alias_regalos }}</span>
                        </div>
                        {% if cliente.cbu_regalos %}
                        <div class="bank-field">
                            <span class="bank-label">CBU:</span>
                            <span class="bank-value">{{ cliente.cbu_regalos }}</span>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </section>
        </div>
    </div>
    {% endif %}

    <!-- Enhanced Lightbox Modal -->
    <div class="modal enhanced-lightbox" id="lightbox-modal">
        <div class="modal-background"></div>
        <div class="lightbox-content">
            <button class="lightbox-close" id="lightbox-close">
                <i class="fas fa-times"></i>
            </button>
            <button class="lightbox-nav lightbox-prev" id="lightbox-prev">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="lightbox-nav lightbox-next" id="lightbox-next">
                <i class="fas fa-chevron-right"></i>
            </button>
            <div class="lightbox-image-container">
                <img id="lightbox-image" src="/placeholder.svg" alt="">
            </div>
            <div class="lightbox-counter">
                <span id="lightbox-current">1</span> / <span id="lightbox-total">1</span>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal" id="success-modal">
        <div class="modal-background"></div>
        <div class="modal-card enhanced-modal-card">
            <header class="modal-card-head">
                <div class="modal-title-wrapper">
                    <div class="modal-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <p class="modal-card-title">¡Gracias por confirmar!</p>
                </div>
                <button class="delete" aria-label="close" id="close-success-modal"></button>
            </header>
            <section class="modal-card-body enhanced-modal-body">
                <div class="has-text-centered">
                    <p>{{ cliente.mensaje_confirmacion|default:"Hemos recibido tu confirmación. ¡Esperamos verte en nuestro día especial!" }}</p>
                </div>
            </section>
        </div>
    </div>

    <!-- Enhanced Scripts -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Loading screen
            const loadingScreen = document.getElementById('loading-screen');
            setTimeout(() => {
                loadingScreen.classList.add('fade-out');
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                }, 500);
            }, 2000);

            // Enhanced countdown functionality
            const countdownElement = document.getElementById('countdown');
            const eventDateString = countdownElement.dataset.eventDate;

            if (eventDateString) {
                const eventDate = new Date(eventDateString);
                const daysEl = document.getElementById('days');
                const hoursEl = document.getElementById('hours');
                const minutesEl = document.getElementById('minutes');
                const secondsEl = document.getElementById('seconds');

                function updateCountdown() {
                    const now = new Date();
                    const distance = eventDate.getTime() - now.getTime();

                    if (distance < 0) {
                        clearInterval(countdownInterval);
                        daysEl.innerHTML = '0';
                        hoursEl.innerHTML = '0';
                        minutesEl.innerHTML = '0';
                        secondsEl.innerHTML = '0';
                        return;
                    }

                    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                    // Animate number changes
                    animateNumber(daysEl, days);
                    animateNumber(hoursEl, hours);
                    animateNumber(minutesEl, minutes);
                    animateNumber(secondsEl, seconds);
                }

                function animateNumber(element, newValue) {
                    if (element.innerHTML !== newValue.toString()) {
                        element.style.transform = 'scale(1.1)';
                        setTimeout(() => {
                            element.innerHTML = newValue;
                            element.style.transform = 'scale(1)';
                        }, 150);
                    }
                }

                updateCountdown();
                const countdownInterval = setInterval(updateCountdown, 1000);
            }

            // Enhanced smooth scroll
            const scrollBtn = document.getElementById("scroll-down-btn");
            const target = document.getElementById("cuenta-regresiva");

            if (scrollBtn && target) {
                scrollBtn.addEventListener("click", function () {
                    target.scrollIntoView({ behavior: "smooth" });
                });
            }

            // Enhanced modal functionality
            const giftModal = document.getElementById('gift-modal');
            const giftOpenBtn = document.getElementById('gift-modal-btn');
            const giftCloseBtn = document.getElementById('close-gift-modal');
            
            const successModal = document.getElementById('success-modal');
            const successCloseBtn = document.getElementById('close-success-modal');

            if (giftOpenBtn && giftModal) {
                giftOpenBtn.addEventListener('click', function () {
                    giftModal.classList.add('is-active');
                    document.body.style.overflow = 'hidden';
                });
            }

            function closeGiftModal() {
                if (giftModal) {
                    giftModal.classList.remove('is-active');
                    document.body.style.overflow = 'auto';
                }
            }

            function closeSuccessModal() {
                if (successModal) {
                    successModal.classList.remove('is-active');
                    document.body.style.overflow = 'auto';
                }
            }

            if (giftCloseBtn) giftCloseBtn.addEventListener('click', closeGiftModal);
            if (successCloseBtn) successCloseBtn.addEventListener('click', closeSuccessModal);
            
            if (giftModal) {
                giftModal.querySelector('.modal-background').addEventListener('click', closeGiftModal);
            }
            if (successModal) {
                successModal.querySelector('.modal-background').addEventListener('click', closeSuccessModal);
            }

            // Show success modal if form was submitted successfully
            {% if form_submitted_successfully %}
            if (successModal) {
                successModal.classList.add('is-active');
                document.body.style.overflow = 'hidden';
            }
            {% endif %}

            // Enhanced gallery lightbox
            const galleryImages = document.querySelectorAll('.gallery-item');
            const lightboxModal = document.getElementById('lightbox-modal');
            const lightboxImage = document.getElementById('lightbox-image');
            const lightboxClose = document.getElementById('lightbox-close');
            const lightboxPrev = document.getElementById('lightbox-prev');
            const lightboxNext = document.getElementById('lightbox-next');
            const lightboxCurrent = document.getElementById('lightbox-current');
            const lightboxTotal = document.getElementById('lightbox-total');
            
            let currentImageIndex = 0;
            const imageUrls = Array.from(galleryImages).map(item => 
                item.querySelector('.gallery-image').src
            );

            if (lightboxTotal) {
                lightboxTotal.textContent = imageUrls.length;
            }

            galleryImages.forEach((item, index) => {
                item.addEventListener('click', () => {
                    currentImageIndex = index;
                    showLightbox();
                });
            });

            function showLightbox() {
                if (lightboxImage && lightboxCurrent && lightboxModal) {
                    lightboxImage.src = imageUrls[currentImageIndex];
                    lightboxCurrent.textContent = currentImageIndex + 1;
                    lightboxModal.classList.add('is-active');
                    document.body.style.overflow = 'hidden';
                }
            }

            function closeLightbox() {
                if (lightboxModal) {
                    lightboxModal.classList.remove('is-active');
                    document.body.style.overflow = 'auto';
                }
            }

            if (lightboxClose) lightboxClose.addEventListener('click', closeLightbox);
            if (lightboxModal) {
                lightboxModal.querySelector('.modal-background').addEventListener('click', closeLightbox);
            }

            if (lightboxPrev) {
                lightboxPrev.addEventListener('click', () => {
                    currentImageIndex = (currentImageIndex - 1 + imageUrls.length) % imageUrls.length;
                    showLightbox();
                });
            }

            if (lightboxNext) {
                lightboxNext.addEventListener('click', () => {
                    currentImageIndex = (currentImageIndex + 1) % imageUrls.length;
                    showLightbox();
                });
            }

            // Keyboard navigation for lightbox
            document.addEventListener('keydown', (e) => {
                if (lightboxModal && lightboxModal.classList.contains('is-active')) {
                    if (e.key === 'Escape') closeLightbox();
                    if (e.key === 'ArrowLeft' && lightboxPrev) lightboxPrev.click();
                    if (e.key === 'ArrowRight' && lightboxNext) lightboxNext.click();
                }
            });

            // Form enhancements
            const inputs = document.querySelectorAll('.enhanced-input, .enhanced-textarea');
            inputs.forEach(input => {
                input.addEventListener('focus', function() {
                    this.parentElement.classList.add('focused');
                });
                
                input.addEventListener('blur', function() {
                    this.parentElement.classList.remove('focused');
                    if (this.value) {
                        this.parentElement.classList.add('has-value');
                    } else {
                        this.parentElement.classList.remove('has-value');
                    }
                });
            });

            // Intersection Observer for animations
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-in');
                    }
                });
            }, observerOptions);

            // Observe elements for animation
            document.querySelectorAll('.gallery-item, .time-block, .detail-row, .info-card-enhanced, .wedding-card').forEach(el => {
                observer.observe(el);
            });
        });
    </script>
</body>

</html>
